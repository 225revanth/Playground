function navigateStep(e){if(2==e){if(!validateStep1())return!1}else if(3==e&&!validateStep2())return!1;if(4==e)return validateStep3(),!1;$(".compare-step").addClass("hide"),$("#compare-step-"+e).removeClass("hide"),$li=$(".steps-list li").removeClass("active").get(e-1),$($li).addClass("active"),$($(".steps-list li").get(e)).removeClass("complete");var t=1==e?0:e-2;$li=$(".steps-list li").get(t),$($li).addClass("complete")}function validateStep1(){var e=$("#select-destination"),t=$("#input-departure-date"),a=$("#input-return-date");$(".validation").remove();var r=!0;return e.find("option:selected").index()<=0&&(e.after('<div class="validation">Please select a destination</div>'),r=!1),$.trim(t.val())||(t.after('<div class="validation">Please enter a departure date</div>'),r=!1),$.trim(a.val())||(a.after('<div class="validation">Please enter a return date</div>'),r=!1),r}function validateStep2(){var e=$("#select-citenzship"),t=$("#select-residence"),a=$(".ta");$(".validation").remove();var r=!0;e.find("option:selected").index()<=0&&(e.after('<div class="validation">Please select a country</div>'),r=!1),t.find("option:selected").index()<=0&&(t.after('<div class="validation">Please select a residence</div>'),r=!1);var n=!0;return a.each(function(e){$.trim($(this).val())&&(n=!1)}),n&&(a.last().parents(".col-sm-4.col-xs-12").append('<div class="validation">Please enter atleast one traveler</div>'),r=!1),r}function validateStep3(){var e=$("#select-destination"),t=$("#input-departure-date"),a=$("#input-return-date"),r=($("#select-citenzship"),$("#select-residence")),n=$("#input-trip-cost"),i=$("#input-trip-paydate"),o=$(".ta"),s=$("#input-trip-email");$(".validation").remove();var l=!0;if($.trim(n.val())||(n.parents(".input-group").after('<div class="validation">Please enter a cost</div>'),l=!1),$.trim(i.val())||(i.after('<div class="validation">Please enter a initial pay date</div>'),l=!1),$.trim(s.val())||(s.after('<div class="validation">Please enter a email</div>'),l=!1),l){var d="/quote?";d+="tc="+n.val(),d+="&",d+="tct=1",d+="&",d+="pd="+e.find("option:selected").val(),d+="&",d+="df="+t.val(),d+="&",d+="dt="+a.val(),d+="&",d+="email="+s.val();var c=0,u="";o.each(function(e){$.trim($(this).val())&&(c++,u+="&ta[]="+$(this).val())}),d+="&",d+="nt="+c,d+=u,d+="&",d+="rc=US",d+="&",d+="rs="+r.find("option:selected").val(),d+="&",d+="cc=US",d+="&",d+="dfp="+i.val(),window.location=d}return l}function showMoreTravelers(){$("#more-travelers").removeClass("hide"),$("#btn-more-travelers").remove()}$(function(){"use strict";if($("#quoteWidget").length>0&&(Aardvark.QuoteForm.enable(),Aardvark.QuoteForm.getData()),$("#purchasePolicy").length>0&&Aardvark.PurchaseForm.enable(),$("#quoteResults").length>0){var e=location.href;$("#quoteLink").val(e),new Clipboard(".clipBtn")}location.search.indexOf("PPCPN")>0&&setTimeout(function(){var e=$(".telNumber span:first").text();location.href="tel:+1"+e,console.log(e)},500),$(document).tooltip({placement:"left",selector:'[data-toggle="tooltip"]'})}),function(e){"use strict";e.redirect=function(t,r,n,i){if(n=n&&["GET","POST","PUT","DELETE"].indexOf(n.toUpperCase())!=-1?n.toUpperCase():"POST",!r){var o=e.parseUrl(t);t=o.url,r=o.params}var s=e("<form>").attr("method",n).attr("action",t);i&&s.attr("target",i);var l={};s[0][l]=s[0].submit,a(r,[],s),e("body").append(s),s[0][l]()},e.parseUrl=function(e){if(e.indexOf("?")===-1)return{url:e,params:{}};var t=e.split("?"),a=t[1],r=a.split("&");e=t[0];var n,i,o={};for(n=0;n<r.length;n+=1)i=r[n].split("="),o[i[0]]=i[1];return{url:e,params:o}};var t=function(t,a,r,n){var i;if(r.length>0){i=r[0];var o;for(o=1;o<r.length;o+=1)i+="["+r[o]+"]";t=n?i+"[]":i+"["+t+"]"}return e("<input>").attr("type","hidden").attr("name",t).attr("value",a)},a=function(e,r,n,i){var o,s=[];for(o in e)"object"==typeof e[o]?(s=r.slice(),i?s.push(""):s.push(o),a(e[o],s,n,Array.isArray(e[o]))):n.append(t(o,e[o],r,i))}}(window.jQuery||window.Zepto||window.jqlite),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function t(e,a,r){function n(o,s){if(!a[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[o]={exports:{}};e[o][0].call(c.exports,function(t){var a=e[o][1][t];return n(a?a:t)},c,c.exports,t,e,a,r)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t,a){var r=e("matches-selector");t.exports=function(e,t,a){for(var n=a?e:e.parentNode;n&&n!==document;){if(r(n,t))return n;n=n.parentNode}}},{"matches-selector":5}],2:[function(e,t,a){function r(e,t,a,r,i){var o=n.apply(this,arguments);return e.addEventListener(a,o,i),{destroy:function(){e.removeEventListener(a,o,i)}}}function n(e,t,a,r){return function(a){a.delegateTarget=i(a.target,t,!0),a.delegateTarget&&r.call(e,a)}}var i=e("closest");t.exports=r},{closest:1}],3:[function(e,t,a){a.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},a.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||a.node(e[0]))},a.string=function(e){return"string"==typeof e||e instanceof String},a.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,a){function r(e,t,a){if(!e&&!t&&!a)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(a))throw new TypeError("Third argument must be a Function");if(s.node(e))return n(e,t,a);if(s.nodeList(e))return i(e,t,a);if(s.string(e))return o(e,t,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function n(e,t,a){return e.addEventListener(t,a),{destroy:function(){e.removeEventListener(t,a)}}}function i(e,t,a){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,a)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,a)})}}}function o(e,t,a){return l(document.body,e,t,a)}var s=e("./is"),l=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,a){function r(e,t){if(i)return i.call(e,t);for(var a=e.parentNode.querySelectorAll(t),r=0;r<a.length;++r)if(a[r]==e)return!0;return!1}var n=Element.prototype,i=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;t.exports=r},{}],6:[function(e,t,a){function r(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var a=window.getSelection(),r=document.createRange();r.selectNodeContents(e),a.removeAllRanges(),a.addRange(r),t=a.toString()}return t}t.exports=r},{}],7:[function(e,t,a){function r(){}r.prototype={on:function(e,t,a){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:a}),this},once:function(e,t,a){function r(){n.off(e,r),t.apply(a,arguments)}var n=this;return r._=t,this.on(e,r,a)},emit:function(e){var t=[].slice.call(arguments,1),a=((this.e||(this.e={}))[e]||[]).slice(),r=0,n=a.length;for(r;n>r;r++)a[r].fn.apply(a[r].ctx,t);return this},off:function(e,t){var a=this.e||(this.e={}),r=a[e],n=[];if(r&&t)for(var i=0,o=r.length;o>i;i++)r[i].fn!==t&&r[i].fn._!==t&&n.push(r[i]);return n.length?a[e]=n:delete a[e],this}},t.exports=r},{}],8:[function(t,a,r){!function(n,i){if("function"==typeof e&&e.amd)e(["module","select"],i);else if("undefined"!=typeof r)i(a,t("select"));else{var o={exports:{}};i(o,n.select),n.clipboardAction=o.exports}}(this,function(e,t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=a(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},e.prototype.selectFake=function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,n["default"])(this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=(0,n["default"])(this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},o(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},{select:6}],9:[function(t,a,r){!function(n,i){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],i);else if("undefined"!=typeof r)i(a,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var o={exports:{}};i(o,n.clipboardAction,n.tinyEmitter,n.goodListener),n.clipboard=o.exports}}(this,function(e,t,a,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var a="data-clipboard-"+e;if(t.hasAttribute(a))return t.getAttribute(a)}var d=n(t),c=n(a),u=n(r),p=function(e){function t(a,r){i(this,t);var n=o(this,e.call(this));return n.resolveOptions(r),n.listenClick(a),n}return s(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=(0,u["default"])(e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new d["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return l("action",e)},t.prototype.defaultTarget=function(e){var t=l("target",e);return t?document.querySelector(t):void 0},t.prototype.defaultText=function(e){return l("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(c["default"]);e.exports=p})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)});var Aardvark=Aardvark||{};Aardvark.QuoteForm=function(e){"use strict";function t(t){var a,r=t.target.value,n={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR","Armed Forces Africa":"AE","Armed Forces America":"AA","Armed Forces Canada":"AE","Armed Forces Europe":"AE","Armed Forces Middle East":"AE","Armed Forces Pacific":"AP",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District Of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},i={Alberta:"AB","British Columbia":"BC",Manitoba:"MB","New Brunswick":"NB","Newfoundland And Labrador":"NL","Northwest Territories":"NT","Nova Scotia":"NS",Nunavut:"NU",Ontario:"ON","Prince Edward Island":"PE",Saskatchewan:"SK",Yukon:"YT"},o=e("#quoteState");"US"===r&&(a=n),"CA"===r&&(a=i),o.empty(),e.each(a,function(t,a){o.append(e("<option></option>").attr("value",a).text(t))})}function a(){e(document).on("keyup change",":text, select",function(){n(this)}),e("#numberOfTravelers").on("change",function(){var t=e(this).val();e("#travelers input:gt("+(t-1)+")").parent().remove();for(var a=e("#travelers input").length;a<t;a++)e('<div class="col-xs-4"><input class="form-control required" type="text" id="t'+(a+1)+'" name="ta[]"></div>').appendTo("#travelers")}),e("#numberOfTravelers").change(),e("#quoteButton").on("click",function(e){n()||e.preventDefault()}),e("#dateFrom").datepicker({dateFormat:"mm/dd/yy",minDate:0,onSelect:function(t){var a=e("#dateFrom"),r=e("#dateTo"),n=a.datepicker("getDate");r.datepicker("option","minDate",n)}}),e("#dateTo").datepicker({dateFormat:"mm/dd/yy",onClose:function(){var t,a=e("#dateFrom"),r=e("#dateTo"),n=a.datepicker("getDate"),i=r.datepicker("getDate");i<=n&&(t=r.datepicker("option","minDate"),r.datepicker("setDate",t))}}),e("#dateFirstPayment").datepicker({dateFormat:"mm/dd/yy",maxDate:0,onSelect:function(e){}}),e("#quoteCountry").on("change",function(e){t(e)})}function r(){var t=e("#quoteData"),a=t.data("traveler-ages").toString().split("|");e("input[name=tc]").val(t.data("trip-cost")),e("select[name=tct]").val(t.data("trip-cost-type")),e("select[name=pd]").val(t.data("destination")),e("input[name=df]").val(t.data("date-from")),e("input[name=dt]").val(t.data("date-to")),e("select[name=nt]").val(t.data("num-travelers")),e("#numberOfTravelers").change(),e("select[name=rc]").val(t.data("residence-country")),e("#quoteCountry").change(),e("select[name=rs]").val(t.data("residence-state")),e("select[name=cc]").val(t.data("citizenship")),e("input[name=dfp]").val(t.data("first-payment"));for(var r=0;r<a.length;r++)e("#t"+(r+1)).val(a[r])}function n(t){var a=e("#quoteWidget :text.required, #quoteWidget select.required");return t?e(t).hasClass("required")&&(""===t.value?e(t).addClass("alert-danger"):e(t).removeClass("alert-danger")):e.each(a,function(t,a){""===a.value?e(a).addClass("alert-danger"):e(a).removeClass("alert-danger")}),e(".alert-danger").length<1}function i(){a(),0===e(".quote-widget").length&&r()}function o(){console.log(e("input, select").serializeArray())}return{enable:i,getData:o}}(jQuery),Aardvark.PurchaseForm=function(e){"use strict";function t(){e(document).on("keyup change",":text, select",function(){r(this)}),e("#purchasePolicy").submit(function(e){e.preventDefault()}),e("#primaryCountry").on("change",function(e){a(e)});var t=e("#quoteData").data("residenceState");e('#primaryState option[value="'+t+'"]').length>0?e('#primaryState option[value="'+t+'"]').prop("selected",!0):(e('#primaryCountry option[value="CA"]').prop("selected",!0),e("#primaryCountry").trigger("change"),e('#primaryState option[value="'+t+'"]').length>0?e('#primaryState option[value="'+t+'"]').prop("selected",!0):(e('#primaryCountry option[value="US"]').prop("selected",!0),e("#primaryCountry").trigger("change"))),e("#js-pay").on("click",function(t){if(t.preventDefault(),r()){e(this).attr("disabled",!0),e("html,body").scrollTop(0),e("#loading").fadeIn();var a=e("#policyData"),n=a.data("provider-name");if("SevenCorners"===n||"JohnHancock"===n){for(var s,l,d,c=(a.data("plan-cost"),a.data("plan-name")),u=a.data("quote-url"),p=a.data("num-travelers"),f=1;f<=p;f++){var m=e('#input-first-name[name="t'+f+'firstName"]').val(),v=e('#input-middle-initial[name="t'+f+'middleName"]').val(),h=e('#input-last-name[name="t'+f+'lastName"]').val();u+="&t"+f+"firstName="+m+"&t"+f+"middleName="+v+"&t"+f+"lastName="+h}u+="&email="+e("#emailAddress").val(),u+="&teln="+e("#phoneNumber").val(),u+="&addressLine1="+e("#primaryStreet").val(),u+="&addressCity="+e("#primaryCity").val(),u+="&addressState="+e("#primaryState").val(),u+="&addressPostCode="+e("#primaryZipCode").val(),u+="&addressCountry="+e("#primaryCountry").val(),o(n,c,u).then(function(t){for(var a=0;a<t.length;a++)if(t[a].planName===c){s=t[a].planPrice,l=t[a].quoteIdentifier,d=t[a].quoteVersion;break}e.get({url:"/quoteGet.php"}).then(function(t){var a=JSON.parse(t);a.provider.quoteIdentifier=l,a.provider.quoteVersion=d,e("#policyData").attr("data-quote-version",d),e("#policyData").attr("data-quote-identifier",l),e.post({url:"/quoteSet.php",data:JSON.stringify(a)}).then(function(e){i()})})})}else i()}else e("html,body").animate({scrollTop:e(".alert-danger").first().offset().top-30},1e3)}),e("input:radio[name=tPrimary]:first").attr("checked",!0);for(var n=0,s=e(".date-field").length;n<=s;n++)e("#t"+n+"dob").datepicker({dateFormat:"mm/dd/yy",maxDate:0,changeMonth:!0,changeYear:!0,yearRange:"1900:2000",onSelect:function(t){e(this).removeClass("alert-danger")}});e("#initialTripDeposit").datepicker({dateFormat:"mm/dd/yy",maxDate:0,onSelect:function(t){e(this).removeClass("alert-danger")}}),e(".date-field").datepicker({dateFormat:"mm/dd/yy",onSelect:function(e){}})}function a(t){var a,r=t.target.value,n={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR","Armed Forces Africa":"AE","Armed Forces America":"AA","Armed Forces Canada":"AE","Armed Forces Europe":"AE","Armed Forces Middle East":"AE","Armed Forces Pacific":"AP",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District Of Columbia":"DC",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachuset:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},i={Alberta:"AB","British Columbia":"BC",Manitoba:"MB","New Brunswick":"NB","Newfoundland And Labrador":"NL","Northwest Territories":"NT","Nova Scotia":"NS",Nunavut:"NU",Ontario:"ON","Prince Edward Island":"PE",Saskatchewan:"SK",Yukon:"YT"},o=e("#primaryState");"US"===r&&(a=n),"CA"===r&&(a=i),o.empty(),e.each(a,function(t,a){o.append(e("<option></option>").attr("value",a).text(t))})}function r(t){var a=e(":text.required, select.required");return t?e(t).hasClass("required")&&(""===t.value?e(t).addClass("alert-danger"):e(t).removeClass("alert-danger")):e.each(a,function(t,a){var r=e(a);if(""===a.value?r.addClass("alert-danger"):r.removeClass("alert-danger"),r.hasClass("nospace")&&r.val(r.val().replace(/\s/g,"")),r.hasClass("number")){var n=/^[0-9]+$/;r.val().match(n)||r.addClass("alert-danger")}if(r.data("minlength"))try{var i=parseInt(r.data("minlength"));r.val().length<i&&r.addClass("alert-danger")}catch(o){}}),e(".alert-danger").length<1}function n(){for(var t=e("#policyData"),a=e("#quoteData"),r=e("input[name=tPrimary]:checked").val(),n=t.data("num-travelers"),i={destination:""+t.data("trip-destination"),depositDate:""+t.data("date-deposit"),tripCost:""+t.data("trip-cost"),planCost:""+t.data("plan-cost"),dateFrom:""+t.data("date-from"),dateTo:""+t.data("date-to"),email:e("#emailAddress").val(),primaryTraveler:{firstName:e("[name=t"+r+"firstName]").val(),lastName:e("[name=t"+r+"lastName]").val(),email:e("#emailAddress").val(),dob:e("[name=t"+r+"dob]").val(),telephone:e("#phoneNumber").val().replace(/\(|-|\)| /g,""),address:{country:e("#primaryCountry").val(),stateProv:e("#primaryState").val(),city:e("#primaryCity").val(),line1:e("#primaryStreet").val(),postCode:e("#primaryZipCode").val()}},additionalInfo:{totalPremiumAmount:""+t.data("plan-cost"),productCode:""+t.data("plan-code"),quoteIdentifier:t.data("quote-identifier")||"",quoteVersion:t.data("quote-version")||"",planName:t.data("plan-name")||"",ups:a.data("ups").split(",")||[]},paymentDetails:{cardType:e("#cardType").val(),amount:""+t.data("plan-cost"),name:e("#cardHoldersName").val(),number:e("#cardNumber").val(),expMonth:e("#cardExpiryMonth").val(),expYear:"20"+e("#cardExpiryYear").val(),cvc:e("#cardCVC").val()},travelers:[]},o=1;o<=n;o++)i.travelers.push({firstName:e("[name=t"+o+"firstName]").val(),middleName:e("[name=t"+o+"middleName]").val(),lastName:e("[name=t"+o+"lastName]").val(),dob:e("[name=t"+o+"dob]").val()});return i.additionalInfo.ups.push("TC"),i}function i(){var t,a=e("#policyData").data("provider-name"),r=n();Autopilot.run("associate",{Email:r.primaryTraveler.email,FirstName:r.primaryTraveler.firstName,LastName:r.primaryTraveler.lastName,custom:{"string--Phone--Number":r.primaryTraveler.telephone,"string--DOB":r.primaryTraveler.dob,"string--Street--Address":r.primaryTraveler.address.line1,"string--City":r.primaryTraveler.address.city,"string--State":r.primaryTraveler.address.stateProv,"string--Country":r.primaryTraveler.address.country,"string--Destination":r.destination,"string--Departure--Date":r.dateFrom,"string--Return--Date":r.dateTo,"string--Carrier":a,"string--Policy":r.additionalInfo.planName,"float--Trip--Cost":r.tripCost,"float--Policy--Cost":r.planCost}}),e("#dataDiv").html("<pre>"+JSON.stringify(r,void 0,2)+"</pre>"),e("#js-pay").attr("disabled",!1),"Travel Insured International"==a&&(a="TII"),e.ajax({url:"/rest/purchase/"+a,method:"POST",data:r,dataType:"json",success:function(a){t="object"==typeof a?a:JSON.parse(a);var n={};e.extend(n,r,t),l(n)},error:function(a){t="object"==typeof a?a:JSON.parse(a),e("#loading").fadeOut(function(){var a={};e.extend(a,r,t),l(a)})}})}function o(t,a,r){var n,t=e("#policyData").data("provider-name"),i=r.replace("?","");return e.ajax({url:"/rest/quotes/"+t,method:"GET",data:i,dataType:"json",success:function(e){n=e,n="object"==typeof e?e:JSON.parse(e)},error:function(e){console.log("Error RES",e),n="object"==typeof e?e:JSON.parse(e)}})}function s(t){var a=n();delete a.paymentDetails;var r={data:a,error:t};e.ajax({method:"POST",url:"/emailError.php",data:r})}function l(t){if(t.error){var a=t.responseJSON;"string"==typeof t.responseJSON&&(a=JSON.parse(t.responseJSON)),e("#errorMsg").text(a.error.text),e("#errorMsgContainer").fadeIn(),e("html,body").animate({scrollTop:e(".alert").first().offset().top-30},1e3),s(a.error.text)}else e.redirect("/thankyou",{providerName:t.providerName||"",policyId:t.policyId||"",policyNumber:t.policyNumber||"",policyLookup:t.policyLookup||"",tripCost:t.planCost||"",planName:t.additionalInfo.planName||"",email:t.primaryTraveler.email||""})}function d(){t()}return{enable:d}}(jQuery),$("#input-departure-date").datepicker({dateFormat:"mm/dd/yy",minDate:0,onSelect:function(e){var t=$("#input-departure-date"),a=$("#input-return-date"),r=t.datepicker("getDate");a.datepicker("option","minDate",r)}}),$("#input-return-date").datepicker({dateFormat:"mm/dd/yy",onSelect:function(e){var t,a=$("#input-departure-date"),r=$("#input-return-date"),n=a.datepicker("getDate"),i=r.datepicker("getDate");i<=n&&(t=r.datepicker("option","minDate"),r.datepicker("setDate",t))}}),$("#input-trip-paydate").datepicker({dateFormat:"mm/dd/yy",maxDate:0,onSelect:function(e){}});